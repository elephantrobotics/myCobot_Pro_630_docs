# 2.5D QR code sorting kit
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/taojian.png" >


## 1 Kit Hardware Introduction
### 1.1 MyCobot Pro630 Robotic Arm

<img src="../../resources/4-FirstInstallAndUse/pro 630 cn.png" >

## 1.1 RealSense D435

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/realsense.png" >

## 2 Realsense software environment construction
### 2.1 Download RealSense SDK 2.0
[Enter URL](https://github.com/IntelRealSense/librealsense/releases/tag/v2.50.0)

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/sdk.png" >
After the download is complete, the software shown in the picture below will be in the folder, and you can install it directly.

### 2.2 Test RealSense D435
Open RealSense Viewer.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/ceshi.png" >

Connect the free USB3.0 cable to the computer, it must be a USB3.0 socket! ! ! ! If it is a 3.0 socket and cable, the left side of the Viewer interface will look like the picture below. Next, just set the Stereo Module and RGB Camera off to on.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/test1.png" >
After setting off to on, the interface shown below will appear. After the test is successful, you can close the software
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/test2.png" >

## 3 Python environment construction
### 3.1 Download python
[Download address](https://www.python.org/downloads/windows/)

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python.png" >

Select the version you want to install. It is recommended to install version 3.7 or above.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python1.png" >

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python2.png" >

After double-clicking the installation package
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python3.png" >

Keep the default configuration and click Next
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python4.png" >
If you select a custom software installation location, click Install
(It is recommended that the installation file path be an English path, because some software installations cannot be opened when encountering Chinese)

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python5.png" >

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python6.png" >

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python7.png" >

After the installation is complete, you can complete the current page, then press the Windows key + r key on the keyboard and enter cmd
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/python8.png" >
pymycobot installation
   ```python
   pip install pymycobot --upgrade --user
   ```
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/pymycobot1.png" >

opencv installation
```bash
# The version numbers of the two must be consistent. Install version 4.5.5.62 here.
pip install opencv-python==4.5.5.62
pip install opencv-contrib-python==4.5.5.62
```
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/opencv1.png" >
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/opencv2.png" >

## 3 Hand-eye calibration

Step 1: After the robotic arm and camera are installed, place the QR code directly below the camera, run the HandToEye script for hand-eye calibration, and observe the XY values output by the script.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/eye.png" >
Step 2: Use the rapid movement of roboflow to teach the robot arm directly above the QR code, and record the actual XY value of roboflow
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/grap.png" >

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/roboflow.png" >
Step 3: Open the count.py script, fill in the corresponding parameters and run the script. Subtract the actual XY value of roboflow, and the XY value of the script is the offset position relationship between the camera coordinate system and the base coordinate system of the robot arm.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/result.png" >

## 4 Case recurrence
Step 1: Open the demo.py script. Users can modify the transition points and sorting area points according to the actual situation.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/step2.png" >

<img src="../../resources/7-ExamplesRobotsUsing/2.5D/step3.png" >
Step 2: Fill in the X deviation and Y deviation calculated by the calibration and run the script.
<img src="../../resources/7-ExamplesRobotsUsing/2.5D/step1.png" >

---

[← Previous page](../3D/3D.md) | [Next section →](../draw/draw.md)