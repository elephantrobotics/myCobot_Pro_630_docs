## Control of the robotic arm

### 1 Enable TCP server function

#### 1.1 Log in to RoboFlow operating system

After the robot is powered on, use VNC Viewer to enter the Raspberry Pi and log in to the RoboFlow operating system.

<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow1.png"></div>

#### 1.2 Start the robot

Enter the configuration center and click the Start Robot button

<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow2.png"></div>
<br>
<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow3.png"></div>
<br>
<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow4.png"></div>

#### 1.3 Check whether the TCP server is open

Return to the main menu, click Write Program, and then click the blank program. After entering the program editing interface, click the Configuration button, click the Network/Serial Port option, and check whether the TCP server is turned on. Normally, **TCP server is turned on by default** , if it is not turned on, you need to turn it on manually and set the IP address manually, such as setting it to **192.168.1.159**.

<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow5.png"></div>
<br>
<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow6.png"></div>
<br>
<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow7.png"></div>
<br>
<div align=center><img src="../../resources/11-ApplicationBaseROS/robotflow8.png"></div>

### 2 Slider control

>>Note: TCP communication needs to ensure that the local virtual machine computer and the MyCobot Pro630 system use the same network and the same network segment.

Open a console terminal and run the command:

```bash
roslaunch mycobot_630 mycobot_630_slider.launch
```

It will open rviz and a slider component, and you will see something like this:

<img src =../../resources/11-ApplicationBaseROS/pro630_slider_control.png
width ="500" align ="center">

You can then control the movement of the model in rviz by dragging the slider. If you want the real MyCobot Pr630 to move along with it, you need to open another console terminal and run the command:

```bash
# The default Socket IP address of MyCobot Pro 630 is 192.168.1.159 and the port number is 5001. If it is inconsistent, it can be modified according to the actual IP address.
rosrun mycobot_630 mycobot_630_slider.py _ip:=192.168.1.159 _port:=5001
```

**Please note: Since the robot arm will move to the current position of the model when the command is entered, please make sure that the model in rviz does not have mold penetration before you use the command**.
**Do not quickly drag the slider after connecting the robotic arm to prevent damage to the robotic arm**.

### 3 Moveit usage

`mycobot_630` now has the MoveIt part integrated.

Open a console terminal (shortcut key <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>) and run the command:

```bash
roslaunch mycobot_630_moveit mycobot630_moveit.launch
```

The running effect is as follows:

<img src =../../resources/11-ApplicationBaseROS/pro630_moveit.png
width ="500" align ="center">

Can be planned and executed to demonstrate the effect:

<video id="my-video" class="video-js" controls preload="auto" width="100%"
poster="" data-setup='{"aspectRatio":"16:9"}'>
   <source src="../../resources/11-ApplicationBaseROS/pro630_moveit.mp4" type='video/mp4' >
</video>

If you need the real robot arm to execute the plan synchronously, you need to open another console terminal and run the command:

```bash
# The default Socket IP address of MyCobot Pro 630 is 192.168.1.159 and the port number is 5001. If it is inconsistent, it can be modified according to the actual IP address.
rosrun mycobot_630_moveit sync_plan.py _ip:=192.168.1.159 _port:=5001
```

Then plan and execute again to demonstrate the effect:

<video id="my-video" class="video-js" controls preload="auto" width="100%"
poster="" data-setup='{"aspectRatio":"16:9"}'>
   <source src="../../resources/11-ApplicationBaseROS/pro630_moveit.mp4" type='video/mp4' >
</video>

---

[← Previous page](11.1.3-RvizIntroduction.md) | [Next section →](../11.2-ROS2/README.md)